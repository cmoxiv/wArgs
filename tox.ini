[tox]
envlist = py38, py39, py310, py311, py312, lint, typecheck, coverage
isolated_build = true

[testenv]
deps =
    pytest>=8.0
    pytest-cov>=5.0
    hypothesis>=6.100
commands =
    pytest {posargs}

[testenv:lint]
deps = ruff>=0.5
skip_install = true
commands =
    ruff check wArgs tests
    ruff format --check wArgs tests

[testenv:typecheck]
deps =
    mypy>=1.8
commands =
    mypy wArgs

[testenv:coverage]
deps =
    pytest>=8.0
    pytest-cov>=5.0
    hypothesis>=6.100
commands =
    pytest --cov=wArgs --cov-report=html --cov-report=term-missing --cov-fail-under=97

[testenv:docs]
deps =
    mkdocs>=1.5
    mkdocs-material>=9.0
    mkdocstrings[python]>=0.24
commands =
    mkdocs build

[testenv:build]
deps =
    build>=1.0
    twine>=5.0
skip_install = true
commands =
    python -m build
    twine check dist/*
